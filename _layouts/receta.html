---
---
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} - Realfoodaholic</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="/index.html" class="logo">
                <img src="/img/avatar.jpg" alt="Realfoodaholic">
                <div class="logo-text">
                    <span>realfoodaholic</span>
                    <nav>
                        <a href="/index.html">Inicio</a>
                        <a href="/categorias.html">Categor√≠as</a>
                    </nav>
                </div>
            </a>
        </div>
    </header>
    
    <main class="container" style="padding: 40px 20px;">
        <a href="/index.html" class="back-link">‚Üê Volver a las recetas</a>
        
        <article>
            {% if page.thumbnail %}
            <img src="{{ page.thumbnail }}" alt="{{ page.title }}" class="recipe-featured-img">
            {% endif %}
            
            <div class="recipe-content">
                <h1>{{ page.title }}</h1>
                <div class="recipe-meta">
                    <span>üìÖ {{ page.date | date: "%Y-%m-%d" }}</span>
                    {% if page.categories.first %}
                    <span>üìÅ {% for cat in page.categories %}{{ site.data.categorias[cat] }}{% unless forloop.last %}, {% endunless %}{% endfor %}</span>
                    {% endif %}
                </div>
                
                <div class="recipe-body">
                    {{ content }}
                    
                    <div style="height:24px" aria-hidden="true"></div>
                    
                    <div class="wp-block-columns">
                        <div class="wp-block-column" style="flex-basis:33.33%">
                            <h5>INGREDIENTES</h5>
                            <ul>
                            {% assign ingredientes_lista = page.ingredientes | split: "
" %}
                            {% for item in ingredientes_lista %}
                                {% if item != "" %}<li>{{ item }}</li>{% endif %}
                            {% endfor %}
                            </ul>
                        </div>
                        
                        <div class="wp-block-column" style="flex-basis:66.66%">
                            <h5>PREPARACI√ìN</h5>
                            <ol>
                            {% assign preparacion_lista = page.preparacion | split: "
" %}
                            {% for paso in preparacion_lista %}
                                {% if paso != "" %}<li>{{ paso }}</li>{% endif %}
                            {% endfor %}
                            </ol>
                        </div>
                    </div>
                    
                    <div style="height:40px" aria-hidden="true"></div>
                    
                    {% assign primera_cat = page.categories.first %}
                    {% assign nombre_cat = site.data.categorias[primera_cat] %}
                    <h5>OTRAS RECETAS DE {{ nombre_cat | upcase }}</h5>
                    
                    <div id="recetas-relacionadas">
                        <p><em>Cargando recetas...</em></p>
                    </div>
                </div>
            </div>
        </article>
    </main>
    
    <footer>
        <div class="container">
            <p>Realfoodaholic - Recetas de comida real ü•ó</p>
        </div>
    </footer>
    
    <script>
        const categoriaActual = "{{ page.categories.first }}";
        const recetaActual = "{{ page.url | split: '/' | last | replace: '.html', '' }}";
        
        async function cargarRecetasRelacionadas() {
            const container = document.getElementById('recetas-relacionadas');
            let todasRecetas = [];
            
            // Cargar recetas del √≠ndice principal
            if (typeof recipes !== 'undefined') {
                todasRecetas = recipes;
            }
            
            // Cargar recetas nuevas
            try {
                const response = await fetch('/recetas-nuevas.json');
                if (response.ok) {
                    const nuevas = await response.json();
                    nuevas.forEach(r => {
                        if (!todasRecetas.find(e => e.slug === r.slug)) {
                            todasRecetas.push(r);
                        }
                    });
                }
            } catch(e) {}
            
            // Filtrar por categor√≠a
            const relacionadas = todasRecetas.filter(r => 
                r.categories && 
                r.categories.includes(categoriaActual) && 
                r.slug !== recetaActual
            ).slice(0, 10);
            
            if (relacionadas.length > 0) {
                container.innerHTML = relacionadas.map(r => 
                    `<p><a href="/recetas/${r.slug}.html">${r.title}</a></p>`
                ).join('');
            } else {
                container.innerHTML = '<p><em>Pr√≥ximamente m√°s recetas de esta categor√≠a</em></p>';
            }
        }
        
        cargarRecetasRelacionadas();
    </script>
    <script src="/js/recipes-data.js"></script>
</body>
</html>
